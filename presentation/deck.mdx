export { condensed as theme } from "mdx-deck/themes";
import { Appear, Notes, Image, useDeck, Head } from "mdx-deck";
import { Horizontal } from "mdx-deck/layouts";
import DevCard from "./devCard";
import Charts from "./charts";
import Timer from "./timer";
import Renderer from "./renderToString";
import {
  hiddenSnippet,
  displayNoneSnippet,
  visibilitySnippet,
  booleanFlagSnippet
} from "./snippets";
import "./styles.css";
import bars from "./bars.json";
import highlights from "./highlights.json";

<Head>
  <title>Evolve</title>
  <link rel="shortcut icon" href="./favicon.ico" />
  <link rel="icon" href="./favicon.ico" />
</Head>
<DevCard />

---

<img
  src="./github_followers.jpg"
  alt="Github followers"
  width="400px"
  height="400px"
/>
<Timer />

---

## Chasing Performance 🦄

The setup:

<Appear>
  <ul>
    <li>14 Endpoints</li>
    <li>300+ parameters</li>
    <li>200 - 1000 entries</li>
    <li>Data dependent on other data</li>
  </ul>
  <span>React + Redux Sagas + Immutable.js</span>
</Appear>
<Timer />

---

## All comes down to

<div className="centered-content">
  <code className="large">HTML + CSS</code>
</div>
<Appear>
  <span>
    Understand how our <br />
    React Components
    <br />
    contribute to the equation
  </span>
</Appear>
<Timer />

---

## Pixel Pipeline

<img src="./frame_full.jpg" alt="Pixel Pipeline" width="900px" />

📝 [Article](https://developers.google.com/web/fundamentals/performance/rendering/)

<Timer />

---

## React Phases

- Render
- Commit

<Appear>
  <span>
    Can we commit without triggering <br /> style, layout, etc.?
  </span>
</Appear>
<Timer />

---

## Example

### 3 Tabs

- Landing
- BitCoin rate, using [Victory Charts](https://formidable.com/open-source/victory/)
- Pokemon type search 🔎

<Timer />

---

## Tooling

- Hidden Attribute [MDN](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/hidden)
- Suspense
- Fetch on Render

<Timer />

---

## Options

<ol>
  <Appear>
    <li>Render tabs using boolean flags </li>
    <li>Using hidden</li>
    <li>Using CSS display</li>
    <li>Using CSS visibility</li>
    <li>Everything on the same page (who likes tabs anyway)</li>
  </Appear>
</ol>
<Timer />

---

## Hidden Attr

<Renderer code={hiddenSnippet} fontSize="1rem" />

---

## Display None

<Renderer code={displayNoneSnippet} fontSize="1rem" />

---

## Visibility

<Renderer code={visibilitySnippet} fontSize="1rem" />

---

## Boolean Flag

<Renderer code={booleanFlagSnippet} fontSize="1rem" />

---

## Does it work?

---

## Main Thread Work

<Charts data={bars} />
<Timer />

---

## FCP, FMP, PWA readiness

<Charts data={highlights} />
<Timer />

---

## UX vs Performance

📑 [Live](https://hidden-attribute.surge.sh/)

📄 [Slow Renders](https://kentcdodds.com/blog/fix-the-slow-render-before-you-fix-the-re-render/) - Kent C. Dodds

<Timer />

---

## Reduce state

Since the Pokemon Tab, never really unmounts,<br/>
we do not lose the query state when switching away.

> Manage state by getting rid of it!

<Timer />

---

## Articles

<img src="./medium_reads.png" alt="Medium Reads" width="900px" height="400px" />
<Timer />

---

# useMemo - useCallback

📝 [Article](https://medium.com/@icjoseph/usememo-usecallback-7d164b9485f1)

- useMemo: returns a value
- useCallback: returns a function

<Timer />

---

# Using the Hidden Attr

- Inspiration from [here](https://github.com/oliviertassinari/react-swipeable-views/issues/453#issuecomment-417939459)

📝 [Article](https://medium.com/evolve-technology/hide-that-da6264a7e1f)

<Timer />
